{"version":3,"file":"main.js","mappings":"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","sources":["webpack://http-frontend/./src/js/components/Ticket.js","webpack://http-frontend/./src/js/components/ErrorPopup.js","webpack://http-frontend/./src/index.js","webpack://http-frontend/./src/js/App.js"],"sourcesContent":["export default class Ticket {\r\n  constructor(name, description) {\r\n    this.#createTicket(name, description);\r\n  }\r\n\r\n  #createTicket(name, description) {\r\n    this.name = name;\r\n    this.description = description;\r\n    this.id = null;\r\n    this.status = false;\r\n    this._currentDate = new Date();\r\n    this._day = this._currentDate.getDate() < 10 ? '0' + this._currentDate.getDate() : this._currentDate.getDate();\r\n    this._month = this._currentDate.getMonth() < 10 ? '0' + (this._currentDate.getMonth() + 1) : this._currentDate.getMonth() + 1;\r\n    this._year = this._currentDate.getFullYear();\r\n    this._hour = this._currentDate.getHours() < 10 ? '0' + this._currentDate.getHours() : this._currentDate.getHours();\r\n    this._minute = this._currentDate.getMinutes() < 10 ? '0' + this._currentDate.getMinutes() : this._currentDate.getMinutes();\r\n    this.created = `${this._day}.${this._month}.${this._year} ${this._hour}:${this._minute}`; \r\n    this._element = {\r\n      name: this.name,\r\n      description: this.description,\r\n      id: this.id,\r\n      status: this.status,\r\n      created: this.created,\r\n    };\r\n  }\r\n\r\n  get element() {\r\n    return this._element;\r\n  }\r\n}","export default class ErrorPopup {\r\n  constructor(err) {\r\n    this.#createElement(err);\r\n  }\r\n\r\n  #createElement(err) {\r\n    const errorContainer = document.createElement('div');\r\n    errorContainer.classList.add('errorContainer');\r\n\r\n    const errorSpan = document.createElement('span');\r\n    errorSpan.classList.add('errorSpan');\r\n    errorSpan.textContent = err;\r\n\r\n    errorContainer.append(errorSpan);\r\n    this._element = errorContainer;\r\n  }\r\n\r\n  get element() {\r\n    return this._element;\r\n  }\r\n}","import './css/style.css';\r\nimport App from './js/App';\r\n\r\nconst app = new App();","import Ticket from './components/Ticket';\r\nimport ErrorPopup from './components/ErrorPopup';\r\n\r\nexport default class App {\r\n  constructor() {\r\n    this.tickets = [];\r\n    this.port = 8080;\r\n    this.actualTicket;\r\n\r\n    this.#addBtnListener();\r\n    this.#submitListener();\r\n    this.#cancelButtonsListener();\r\n\r\n    this.#init();\r\n  }\r\n\r\n  #addBtnListener() {\r\n    const addBtn = document.querySelector('.field_addBtn');\r\n    addBtn.addEventListener('click', () => {\r\n      const addPopup = document.querySelector('.popup_add');\r\n      addPopup.style.display = 'flex';\r\n    });\r\n  }\r\n\r\n  #init() {\r\n    fetch(`http://localhost:${this.port}/?method=allTickets`)\r\n      .then(response => {\r\n        if (response.ok && response.status !== 204) {\r\n          return response.json();\r\n        } else {\r\n          throw new Error('Response is not Ok or status is 204');\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.tickets = data;\r\n      })\r\n      .then(() => {\r\n        if (this.tickets.length > 0) {\r\n          this.#drawTickets();\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n    \r\n  }\r\n\r\n  #ticketListener(ticket) {\r\n    const progressBtn = ticket.querySelector('.ticket_progressBtn');\r\n    const editBtn = ticket.querySelector('.ticket_editBtn');\r\n    const deleteBtn = ticket.querySelector('.ticket_deleteBtn');\r\n\r\n    ticket.addEventListener('click', (e) => {\r\n      this.actualTicket = ticket;\r\n\r\n      const ticketFrame = this.tickets.find(t => t.id === this.actualTicket.id);\r\n\r\n      switch (e.target) {\r\n        case progressBtn:\r\n          const body = JSON.stringify({\r\n            status: !ticketFrame.status,\r\n          });\r\n    \r\n          fetch(`http://localhost:${this.port}/?method=updateById&id=${this.actualTicket.id}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body,\r\n          })\r\n            .then(response => {\r\n              if (response.ok && response.status !== 204) {\r\n                return response.json();\r\n              } else {\r\n                throw new Error('Response is not Ok or status is 204');\r\n              }\r\n            })\r\n            .then(data => {\r\n              this.tickets.forEach(t => {\r\n                if (t.id === data.id) {\r\n                  t.status = data.status;\r\n                }\r\n              })\r\n            })\r\n            .then(() => {\r\n              this.actualTicket = undefined;\r\n              if (this.tickets.length > 0) {\r\n                this.#drawTickets();\r\n              }\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n          break;\r\n        case editBtn: \r\n          const ticketName = ticket.querySelector('.ticket_Name').textContent;\r\n\r\n          const editPopup = document.querySelector('.popup_edit');\r\n          editPopup.style.display = 'flex';\r\n    \r\n          fetch(`http://localhost:${this.port}/?method=ticketById&id=${this.actualTicket.id}`)\r\n            .then(response => {\r\n              if (response.ok && response.status !== 204) {\r\n                return response.json();\r\n              } else {\r\n                throw new Error('Response is not Ok or status is 204');\r\n              }\r\n            })\r\n            .then(data => {\r\n              const { description } = data;\r\n              return description;\r\n            })\r\n            .then(description => {\r\n              if (description) {\r\n                editPopup.querySelector('.popup_input').value = ticketName;\r\n                editPopup.querySelector('.popup_textarea').value = description;\r\n              }\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n          break;\r\n\r\n        case deleteBtn:\r\n          const deletePopup = document.querySelector('.popup_delete');\r\n          deletePopup.style.display = 'flex';\r\n          break;\r\n        default:\r\n          fetch(`http://localhost:${this.port}/?method=ticketById&id=${this.actualTicket.id}`)\r\n            .then(response => {\r\n              if (response.ok && response.status !== 204) {\r\n                return response.json();\r\n              } else {\r\n                throw new Error('Response is not Ok or status is 204');\r\n              }\r\n            })\r\n            .then(data => {\r\n              const { description } = data;\r\n              return description;\r\n            })\r\n            .then(description => {\r\n              console.log(description);\r\n              const ticketDescription = this.actualTicket.querySelector('.ticket_Description');\r\n              if (ticketDescription.textContent === '') {\r\n                description.forEach(row => {\r\n                  const p = document.createElement('p');\r\n                  p.textContent = row;\r\n                  ticketDescription.append(p);\r\n                });\r\n              } else {\r\n                ticketDescription.textContent = '';\r\n              }\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n\r\n        break;\r\n      }\r\n\r\n    });\r\n\r\n    progressBtn.addEventListener('click', (e) => {\r\n      this.actualTicket = ticket;\r\n\r\n      const ticketFrame = this.tickets.find(t => t.id === this.actualTicket.id);\r\n\r\n      const body = JSON.stringify({\r\n        status: !ticketFrame.status,\r\n      });\r\n\r\n      fetch(`http://localhost:${this.port}/?method=updateById&id=${this.actualTicket.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body,\r\n      })\r\n        .then(response => {\r\n          if (response.ok && response.status !== 204) {\r\n            return response.json();\r\n          } else {\r\n            throw new Error('Response is not Ok or status is 204');\r\n          }\r\n        })\r\n        .then(data => {\r\n          this.tickets.forEach(t => {\r\n            if (t.id === data.id) {\r\n              t.status = data.status;\r\n            }\r\n          })\r\n        })\r\n        .then(() => {\r\n          this.actualTicket = undefined;\r\n          if (this.tickets.length > 0) {\r\n            this.#drawTickets();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    });\r\n\r\n    editBtn.addEventListener('click', (e) => {\r\n      this.actualTicket = ticket;\r\n\r\n      const ticketName = ticket.querySelector('.ticket_Name').textContent;\r\n\r\n      const editPopup = document.querySelector('.popup_edit');\r\n      editPopup.style.display = 'flex';\r\n\r\n      fetch(`http://localhost:${this.port}/?method=ticketById&id=${this.actualTicket.id}`)\r\n        .then(response => {\r\n          if (response.ok && response.status !== 204) {\r\n            return response.json();\r\n          } else {\r\n            throw new Error('Response is not Ok or status is 204');\r\n          }\r\n        })\r\n        .then(data => {\r\n          const { description } = data;\r\n          return description;\r\n        })\r\n        .then(description => {\r\n          if (description) {\r\n            editPopup.querySelector('.popup_input').value = ticketName;\r\n            editPopup.querySelector('.popup_textarea').value = description;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    });\r\n\r\n    deleteBtn.addEventListener('click', (e) => {\r\n      this.actualTicket = ticket;\r\n\r\n      const deletePopup = document.querySelector('.popup_delete');\r\n      deletePopup.style.display = 'flex';\r\n    });\r\n  }\r\n\r\n  #drawTickets() {\r\n    document.querySelector('.field_ticketsContainer').innerHTML = '';\r\n    this.tickets.forEach((t) => {\r\n      const ticket = document.createElement('div');\r\n      ticket.classList.add('ticket');\r\n  \r\n      ticket.setAttribute('id', t.id);\r\n\r\n      const ticketBody = document.createElement('div');\r\n      ticketBody.classList.add('ticket_body');\r\n  \r\n      const progressBtn = document.createElement('div');\r\n      progressBtn.classList.add('ticket_progressBtn');\r\n      progressBtn.classList.add('ticket_icon');\r\n      progressBtn.classList.add('btn');\r\n      if (t.status) {\r\n        progressBtn.classList.add('ticket_progressBtn-active');\r\n      }\r\n      const nameAndDateContainer = document.createElement('div');\r\n      nameAndDateContainer.classList.add('ticket_nameAndDateContainer');\r\n  \r\n      const ticketName = document.createElement('span');\r\n      ticketName.classList.add('ticket_Name');\r\n      ticketName.textContent = t.name;\r\n  \r\n      const ticketDescription = document.createElement('span');\r\n      ticketDescription.classList.add('ticket_Description');\r\n  \r\n      const ticketCreated = document.createElement('span');\r\n      ticketCreated.classList.add('ticket_created');\r\n      ticketCreated.textContent = t.created;\r\n\r\n      nameAndDateContainer.append(ticketName, ticketCreated);\r\n  \r\n      const editBtn = document.createElement('div');\r\n      editBtn.classList.add('ticket_editBtn');\r\n      editBtn.classList.add('ticket_icon');\r\n      editBtn.classList.add('btn');\r\n  \r\n      const deleteBtn = document.createElement('div');\r\n      deleteBtn.classList.add('ticket_deleteBtn');\r\n      deleteBtn.classList.add('ticket_icon');\r\n      deleteBtn.classList.add('btn');\r\n\r\n      ticketBody.append(progressBtn, nameAndDateContainer, editBtn, deleteBtn);\r\n  \r\n      ticket.append(ticketBody, ticketDescription);\r\n  \r\n      document.querySelector('.field_ticketsContainer').append(ticket);\r\n      this.#ticketListener(ticket);\r\n    });  \r\n  }\r\n\r\n  #submitListener() {\r\n    const field = document.querySelector('.field');\r\n    field.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      if (e.target.closest('.popup').classList.contains('popup_add')) {\r\n        const formData = Array.from(e.target.closest('.form').elements).filter(({ name }) => name);\r\n\r\n        const ticket = new Ticket(formData[0].value, formData[1].value);\r\n  \r\n        const body = JSON.stringify(ticket.element);\r\n  \r\n        fetch(`http://localhost:${this.port}/?method=createTicket`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n          },\r\n          body,\r\n        })\r\n          .then(response => {\r\n            if (response.ok && response.status !== 204) {\r\n              return response.json();\r\n            } else {\r\n              throw new Error('Response is not Ok or status is 204');\r\n            }\r\n          })\r\n          .then(data => {\r\n            if (data.error) {\r\n              throw new Error(data.error);\r\n            } else {\r\n              this.tickets.push(data);\r\n            }\r\n          })\r\n          .then(() => {\r\n            formData[0].value = '';\r\n            formData[1].value = '';\r\n            e.target.closest('.popup').style.display = 'none';\r\n            if (this.tickets.length > 0) {\r\n              this.#drawTickets();\r\n            }\r\n          })\r\n          .catch(err => {\r\n            if (err.message == 'Ticket already exists') {\r\n              const errorPopup = new ErrorPopup(err);\r\n\r\n              e.target.closest('.popup').append(errorPopup.element);\r\n\r\n              setTimeout(() => {\r\n                errorPopup.element.remove();\r\n              }, 3500);\r\n              \r\n            }\r\n            console.log(err);\r\n          });\r\n      } else if (e.target.closest('.popup').classList.contains('popup_edit')) {\r\n        const status = this.tickets.find(t => t.id === this.actualTicket.id).status;\r\n        const formData = Array.from(e.target.closest('.form').elements).filter(({ name }) => name);\r\n\r\n        const body = JSON.stringify({\r\n          name: formData[0].value,\r\n          description: formData[1].value,\r\n        });\r\n\r\n        fetch(`http://localhost:${this.port}/?method=updateById&id=${this.actualTicket.id}`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-type': 'application/json;charset=utf-8'\r\n          },\r\n          body,\r\n        })\r\n          .then(response => {\r\n            if (response.ok && response.status !== 204) {\r\n              return response.json();\r\n            } else {\r\n              throw new Error('Response is not Ok or status is 204');\r\n            }\r\n          })\r\n          .then(data => {\r\n            if (data.error) {\r\n              throw new Error(data.error);\r\n            } else {\r\n              this.tickets.forEach(t => {\r\n                if (t.id === data.id) {\r\n                  t.name = data.name;\r\n                  t.description = data.description;\r\n                }\r\n              })\r\n            }\r\n          })\r\n          .then(() => {\r\n            this.actualTicket = undefined;\r\n            e.target.closest('.popup').style.display = 'none';\r\n            if (this.tickets.length > 0) {\r\n              this.#drawTickets();\r\n            }\r\n          })\r\n          .catch(err => {\r\n            if (err.message == 'Ticket already exists') {\r\n              const errorPopup = new ErrorPopup(err);\r\n\r\n              e.target.closest('.popup').append(errorPopup.element);\r\n\r\n              setTimeout(() => {\r\n                errorPopup.element.remove();\r\n              }, 3500);\r\n              \r\n            }\r\n            console.log(err);\r\n          });\r\n      }\r\n    \r\n    \r\n      if (e.target.closest('.popup').classList.contains('popup_delete')) {\r\n        fetch(`http://localhost:${this.port}/?method=deleteById&id=${this.actualTicket.id}`)\r\n          .then(response => {\r\n            if (response.ok && response.status !== 204) {\r\n              return response.json();\r\n            } else {\r\n              throw new Error('Response is not Ok or status is 204');\r\n            }\r\n          })\r\n          .then(data => {\r\n            this.tickets = data;\r\n          })\r\n          .then(() => {\r\n            this.actualTicket = undefined;\r\n            e.target.closest('.popup').style.display = 'none';\r\n            this.#drawTickets();\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  #cancelButtonsListener() {\r\n    const cancelButtons = document.querySelectorAll('.popup_cancelBtn');\r\n    [...cancelButtons].forEach((el) => {\r\n      el.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        \r\n        e.target.parentNode.parentNode.parentNode.style.display = 'none';\r\n      })\r\n    });\r\n  }\r\n\r\n}"],"names":["Ticket","constructor","name","description","this","id","status","_currentDate","Date","_day","getDate","_month","getMonth","_year","getFullYear","_hour","getHours","_minute","getMinutes","created","_element","element","ErrorPopup","err","errorContainer","document","createElement","classList","add","errorSpan","textContent","append","tickets","port","actualTicket","querySelector","addEventListener","style","display","fetch","then","response","ok","json","Error","data","length","catch","console","log","ticket","progressBtn","editBtn","deleteBtn","e","ticketFrame","find","t","target","body","JSON","stringify","method","headers","forEach","undefined","ticketName","editPopup","value","ticketDescription","row","p","innerHTML","setAttribute","ticketBody","nameAndDateContainer","ticketCreated","preventDefault","closest","contains","formData","Array","from","elements","filter","error","push","message","errorPopup","setTimeout","remove","querySelectorAll","el","parentNode"],"sourceRoot":""}